/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/trpc/[trpc]/route";
exports.ids = ["app/api/trpc/[trpc]/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/@supabase/realtime-js/dist/main sync recursive":
/*!************************************************************!*\
  !*** ./node_modules/@supabase/realtime-js/dist/main/ sync ***!
  \************************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/@supabase/realtime-js/dist/main sync recursive";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute.ts&appDir=C%3A%5CUsers%5CSHISHUPAL%5CDocuments%5COneDrive%20-%20iitkgp.ac.in%5CDesktop%5CSample%5Cchatgpt-mobile-clone%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CSHISHUPAL%5CDocuments%5COneDrive%20-%20iitkgp.ac.in%5CDesktop%5CSample%5Cchatgpt-mobile-clone&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute.ts&appDir=C%3A%5CUsers%5CSHISHUPAL%5CDocuments%5COneDrive%20-%20iitkgp.ac.in%5CDesktop%5CSample%5Cchatgpt-mobile-clone%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CSHISHUPAL%5CDocuments%5COneDrive%20-%20iitkgp.ac.in%5CDesktop%5CSample%5Cchatgpt-mobile-clone&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_SHISHUPAL_Documents_OneDrive_iitkgp_ac_in_Desktop_Sample_chatgpt_mobile_clone_app_api_trpc_trpc_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/trpc/[trpc]/route.ts */ \"(rsc)/./app/api/trpc/[trpc]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/trpc/[trpc]/route\",\n        pathname: \"/api/trpc/[trpc]\",\n        filename: \"route\",\n        bundlePath: \"app/api/trpc/[trpc]/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\SHISHUPAL\\\\Documents\\\\OneDrive - iitkgp.ac.in\\\\Desktop\\\\Sample\\\\chatgpt-mobile-clone\\\\app\\\\api\\\\trpc\\\\[trpc]\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_SHISHUPAL_Documents_OneDrive_iitkgp_ac_in_Desktop_Sample_chatgpt_mobile_clone_app_api_trpc_trpc_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/trpc/[trpc]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0cnBjJTJGJTVCdHJwYyU1RCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdHJwYyUyRiU1QnRycGMlNUQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ0cnBjJTJGJTVCdHJwYyU1RCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNTSElTSFVQQUwlNUNEb2N1bWVudHMlNUNPbmVEcml2ZSUyMC0lMjBpaXRrZ3AuYWMuaW4lNUNEZXNrdG9wJTVDU2FtcGxlJTVDY2hhdGdwdC1tb2JpbGUtY2xvbmUlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q1NISVNIVVBBTCU1Q0RvY3VtZW50cyU1Q09uZURyaXZlJTIwLSUyMGlpdGtncC5hYy5pbiU1Q0Rlc2t0b3AlNUNTYW1wbGUlNUNjaGF0Z3B0LW1vYmlsZS1jbG9uZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDaUY7QUFDOUo7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGF0Z3B0LW1vYmlsZS1jbG9uZS8/MWRhMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxTSElTSFVQQUxcXFxcRG9jdW1lbnRzXFxcXE9uZURyaXZlIC0gaWl0a2dwLmFjLmluXFxcXERlc2t0b3BcXFxcU2FtcGxlXFxcXGNoYXRncHQtbW9iaWxlLWNsb25lXFxcXGFwcFxcXFxhcGlcXFxcdHJwY1xcXFxbdHJwY11cXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3RycGMvW3RycGNdL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdHJwYy9bdHJwY11cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3RycGMvW3RycGNdL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcU0hJU0hVUEFMXFxcXERvY3VtZW50c1xcXFxPbmVEcml2ZSAtIGlpdGtncC5hYy5pblxcXFxEZXNrdG9wXFxcXFNhbXBsZVxcXFxjaGF0Z3B0LW1vYmlsZS1jbG9uZVxcXFxhcHBcXFxcYXBpXFxcXHRycGNcXFxcW3RycGNdXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS90cnBjL1t0cnBjXS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute.ts&appDir=C%3A%5CUsers%5CSHISHUPAL%5CDocuments%5COneDrive%20-%20iitkgp.ac.in%5CDesktop%5CSample%5Cchatgpt-mobile-clone%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CSHISHUPAL%5CDocuments%5COneDrive%20-%20iitkgp.ac.in%5CDesktop%5CSample%5Cchatgpt-mobile-clone&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/trpc/[trpc]/route.ts":
/*!**************************************!*\
  !*** ./app/api/trpc/[trpc]/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ handler),\n/* harmony export */   POST: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _trpc_server_adapters_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @trpc/server/adapters/fetch */ \"(rsc)/./node_modules/@trpc/server/dist/adapters/fetch/index.mjs\");\n/* harmony import */ var _lib_trpc_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/trpc/server */ \"(rsc)/./lib/trpc/server.ts\");\n// app/api/trpc/[trpc]/route.ts\n// This is the tRPC API route handler for Next.js App Router.\n\n // Import our tRPC router and context creator\nconst handler = (req)=>(0,_trpc_server_adapters_fetch__WEBPACK_IMPORTED_MODULE_0__.fetchRequestHandler)({\n        endpoint: \"/api/trpc\",\n        req,\n        router: _lib_trpc_server__WEBPACK_IMPORTED_MODULE_1__.appRouter,\n        createContext: ()=>(0,_lib_trpc_server__WEBPACK_IMPORTED_MODULE_1__.createContext)(),\n        onError: ({ path, error })=>{\n            console.error(`‚ùå tRPC failed on ${path ?? \"<no-path>\"}: ${error.message}`);\n        }\n    });\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3RycGMvW3RycGNdL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSwrQkFBK0I7QUFDL0IsNkRBQTZEO0FBRUs7QUFDTCxDQUFDLDZDQUE2QztBQUUzRyxNQUFNRyxVQUFVLENBQUNDLE1BQ2ZKLGdGQUFtQkEsQ0FBQztRQUNsQkssVUFBVTtRQUNWRDtRQUNBRSxRQUFRTCx1REFBU0E7UUFDakJDLGVBQWUsSUFBTUEsK0RBQWFBO1FBQ2xDSyxTQUFTLENBQUMsRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUU7WUFDdkJDLFFBQVFELEtBQUssQ0FBQyxDQUFDLGlCQUFpQixFQUFFRCxRQUFRLFlBQVksRUFBRSxFQUFFQyxNQUFNRSxPQUFPLENBQUMsQ0FBQztRQUMzRTtJQUNGO0FBRXlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hhdGdwdC1tb2JpbGUtY2xvbmUvLi9hcHAvYXBpL3RycGMvW3RycGNdL3JvdXRlLnRzPzJiZjciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gYXBwL2FwaS90cnBjL1t0cnBjXS9yb3V0ZS50c1xyXG4vLyBUaGlzIGlzIHRoZSB0UlBDIEFQSSByb3V0ZSBoYW5kbGVyIGZvciBOZXh0LmpzIEFwcCBSb3V0ZXIuXHJcblxyXG5pbXBvcnQgeyBmZXRjaFJlcXVlc3RIYW5kbGVyIH0gZnJvbSAnQHRycGMvc2VydmVyL2FkYXB0ZXJzL2ZldGNoJztcclxuaW1wb3J0IHsgYXBwUm91dGVyLCBjcmVhdGVDb250ZXh0IH0gZnJvbSAnQC9saWIvdHJwYy9zZXJ2ZXInOyAvLyBJbXBvcnQgb3VyIHRSUEMgcm91dGVyIGFuZCBjb250ZXh0IGNyZWF0b3JcclxuXHJcbmNvbnN0IGhhbmRsZXIgPSAocmVxOiBSZXF1ZXN0KSA9PlxyXG4gIGZldGNoUmVxdWVzdEhhbmRsZXIoe1xyXG4gICAgZW5kcG9pbnQ6ICcvYXBpL3RycGMnLCAvLyBUaGUgZW5kcG9pbnQgZm9yIG91ciB0UlBDIEFQSVxyXG4gICAgcmVxLFxyXG4gICAgcm91dGVyOiBhcHBSb3V0ZXIsXHJcbiAgICBjcmVhdGVDb250ZXh0OiAoKSA9PiBjcmVhdGVDb250ZXh0KCksIC8vIOKchSBObyBhcmd1bWVudHNcclxuICAgIG9uRXJyb3I6ICh7IHBhdGgsIGVycm9yIH0pID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihg4p2MIHRSUEMgZmFpbGVkIG9uICR7cGF0aCA/PyAnPG5vLXBhdGg+J306ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgIH0sXHJcbiAgfSk7XHJcblxyXG5leHBvcnQgeyBoYW5kbGVyIGFzIEdFVCwgaGFuZGxlciBhcyBQT1NUIH07XHJcbiJdLCJuYW1lcyI6WyJmZXRjaFJlcXVlc3RIYW5kbGVyIiwiYXBwUm91dGVyIiwiY3JlYXRlQ29udGV4dCIsImhhbmRsZXIiLCJyZXEiLCJlbmRwb2ludCIsInJvdXRlciIsIm9uRXJyb3IiLCJwYXRoIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsIkdFVCIsIlBPU1QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/trpc/[trpc]/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabaseClient.ts":
/*!*******************************!*\
  !*** ./lib/supabaseClient.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSupabaseAdminClient: () => (/* binding */ createSupabaseAdminClient),\n/* harmony export */   createSupabaseClient: () => (/* binding */ createSupabaseClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n// lib/supabaseClient.ts\n\n// Server-side admin client (uses service_role key for full privileges)\nfunction createSupabaseAdminClient() {\n    const supabaseUrl = \"https://sseocjwcahftbnhrqgzd.supabase.co\";\n    const supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n    console.log(\"[Supabase Admin Client] URL:\", supabaseUrl ? supabaseUrl.substring(0, 30) + \"...\" : \"Not Set\");\n    console.log(\"[Supabase Admin Client] Service Role Key:\", supabaseServiceRoleKey ? supabaseServiceRoleKey.substring(0, 5) + \"...\" : \"Not Set\");\n    if (!supabaseUrl || !supabaseServiceRoleKey) {\n        console.error(\"Supabase URL or Service Role Key are not set in environment variables.\");\n        throw new Error(\"Supabase environment variables are missing.\");\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceRoleKey);\n}\n// Client-side public client (uses anon key) - typically not used directly in this tRPC server context,\n// but good to have if you need client-side Supabase interactions\nfunction createSupabaseClient() {\n    const supabaseUrl = \"https://sseocjwcahftbnhrqgzd.supabase.co\";\n    const supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzZW9jandjYWhmdGJuaHJxZ3pkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkxODUyNjUsImV4cCI6MjA2NDc2MTI2NX0.3Hq0h8jsUII0IUzASgoiT2VTt1m0KAk2TEHUa-tVJMA\";\n    console.log(\"[Supabase Client] URL:\", supabaseUrl ? supabaseUrl.substring(0, 30) + \"...\" : \"Not Set\");\n    console.log(\"[Supabase Client] Anon Key:\", supabaseAnonKey ? supabaseAnonKey.substring(0, 5) + \"...\" : \"Not Set\");\n    if (!supabaseUrl || !supabaseAnonKey) {\n        console.error(\"Supabase URL or Anon Key are not set in environment variables.\");\n        throw new Error(\"Supabase environment variables are missing.\");\n    }\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2VDbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsd0JBQXdCO0FBQzZCO0FBRXJELHVFQUF1RTtBQUNoRSxTQUFTQztJQUNkLE1BQU1DLGNBQWNDLDBDQUFvQztJQUN4RCxNQUFNRyx5QkFBeUJILFFBQVFDLEdBQUcsQ0FBQ0cseUJBQXlCO0lBRXBFQyxRQUFRQyxHQUFHLENBQUMsZ0NBQWdDUCxjQUFjQSxZQUFZUSxTQUFTLENBQUMsR0FBRyxNQUFNLFFBQVE7SUFDakdGLFFBQVFDLEdBQUcsQ0FBQyw2Q0FBNkNILHlCQUF5QkEsdUJBQXVCSSxTQUFTLENBQUMsR0FBRyxLQUFLLFFBQVE7SUFFbkksSUFBSSxDQUFDUixlQUFlLENBQUNJLHdCQUF3QjtRQUMzQ0UsUUFBUUcsS0FBSyxDQUFDO1FBQ2QsTUFBTSxJQUFJQyxNQUFNO0lBQ2xCO0lBRUEsT0FBT1osbUVBQVlBLENBQUNFLGFBQWFJO0FBQ25DO0FBRUEsdUdBQXVHO0FBQ3ZHLGlFQUFpRTtBQUMxRCxTQUFTTztJQUNkLE1BQU1YLGNBQWNDLDBDQUFvQztJQUN4RCxNQUFNVyxrQkFBa0JYLGtOQUF5QztJQUVqRUssUUFBUUMsR0FBRyxDQUFDLDBCQUEwQlAsY0FBY0EsWUFBWVEsU0FBUyxDQUFDLEdBQUcsTUFBTSxRQUFRO0lBQzNGRixRQUFRQyxHQUFHLENBQUMsK0JBQStCSyxrQkFBa0JBLGdCQUFnQkosU0FBUyxDQUFDLEdBQUcsS0FBSyxRQUFRO0lBRXZHLElBQUksQ0FBQ1IsZUFBZSxDQUFDWSxpQkFBaUI7UUFDcENOLFFBQVFHLEtBQUssQ0FBQztRQUNkLE1BQU0sSUFBSUMsTUFBTTtJQUNsQjtJQUVBLE9BQU9aLG1FQUFZQSxDQUFDRSxhQUFhWTtBQUNuQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoYXRncHQtbW9iaWxlLWNsb25lLy4vbGliL3N1cGFiYXNlQ2xpZW50LnRzPzNhN2QiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL3N1cGFiYXNlQ2xpZW50LnRzXHJcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcblxyXG4vLyBTZXJ2ZXItc2lkZSBhZG1pbiBjbGllbnQgKHVzZXMgc2VydmljZV9yb2xlIGtleSBmb3IgZnVsbCBwcml2aWxlZ2VzKVxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3VwYWJhc2VBZG1pbkNsaWVudCgpIHtcclxuICBjb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcclxuICBjb25zdCBzdXBhYmFzZVNlcnZpY2VSb2xlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWTtcclxuXHJcbiAgY29uc29sZS5sb2coJ1tTdXBhYmFzZSBBZG1pbiBDbGllbnRdIFVSTDonLCBzdXBhYmFzZVVybCA/IHN1cGFiYXNlVXJsLnN1YnN0cmluZygwLCAzMCkgKyAnLi4uJyA6ICdOb3QgU2V0Jyk7XHJcbiAgY29uc29sZS5sb2coJ1tTdXBhYmFzZSBBZG1pbiBDbGllbnRdIFNlcnZpY2UgUm9sZSBLZXk6Jywgc3VwYWJhc2VTZXJ2aWNlUm9sZUtleSA/IHN1cGFiYXNlU2VydmljZVJvbGVLZXkuc3Vic3RyaW5nKDAsIDUpICsgJy4uLicgOiAnTm90IFNldCcpO1xyXG5cclxuICBpZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZVNlcnZpY2VSb2xlS2V5KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBVUkwgb3IgU2VydmljZSBSb2xlIEtleSBhcmUgbm90IHNldCBpbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMuJyk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1N1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgbWlzc2luZy4nKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlU2VydmljZVJvbGVLZXkpO1xyXG59XHJcblxyXG4vLyBDbGllbnQtc2lkZSBwdWJsaWMgY2xpZW50ICh1c2VzIGFub24ga2V5KSAtIHR5cGljYWxseSBub3QgdXNlZCBkaXJlY3RseSBpbiB0aGlzIHRSUEMgc2VydmVyIGNvbnRleHQsXHJcbi8vIGJ1dCBnb29kIHRvIGhhdmUgaWYgeW91IG5lZWQgY2xpZW50LXNpZGUgU3VwYWJhc2UgaW50ZXJhY3Rpb25zXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdXBhYmFzZUNsaWVudCgpIHtcclxuICBjb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcclxuICBjb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTtcclxuXHJcbiAgY29uc29sZS5sb2coJ1tTdXBhYmFzZSBDbGllbnRdIFVSTDonLCBzdXBhYmFzZVVybCA/IHN1cGFiYXNlVXJsLnN1YnN0cmluZygwLCAzMCkgKyAnLi4uJyA6ICdOb3QgU2V0Jyk7XHJcbiAgY29uc29sZS5sb2coJ1tTdXBhYmFzZSBDbGllbnRdIEFub24gS2V5OicsIHN1cGFiYXNlQW5vbktleSA/IHN1cGFiYXNlQW5vbktleS5zdWJzdHJpbmcoMCwgNSkgKyAnLi4uJyA6ICdOb3QgU2V0Jyk7XHJcblxyXG4gIGlmICghc3VwYWJhc2VVcmwgfHwgIXN1cGFiYXNlQW5vbktleSkge1xyXG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgVVJMIG9yIEFub24gS2V5IGFyZSBub3Qgc2V0IGluIGVudmlyb25tZW50IHZhcmlhYmxlcy4nKTtcclxuICAgIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBtaXNzaW5nLicpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcclxufVxyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiY3JlYXRlU3VwYWJhc2VBZG1pbkNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlU2VydmljZVJvbGVLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiY29uc29sZSIsImxvZyIsInN1YnN0cmluZyIsImVycm9yIiwiRXJyb3IiLCJjcmVhdGVTdXBhYmFzZUNsaWVudCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabaseClient.ts\n");

/***/ }),

/***/ "(rsc)/./lib/trpc/server.ts":
/*!****************************!*\
  !*** ./lib/trpc/server.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appRouter: () => (/* binding */ appRouter),\n/* harmony export */   createContext: () => (/* binding */ createContext)\n/* harmony export */ });\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @trpc/server */ \"(rsc)/./node_modules/@trpc/server/dist/index.mjs\");\n/* harmony import */ var _auth0_nextjs_auth0__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @auth0/nextjs-auth0 */ \"(rsc)/./node_modules/@auth0/nextjs-auth0/dist/index.js\");\n/* harmony import */ var _auth0_nextjs_auth0__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_auth0_nextjs_auth0__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _supabaseClient__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../supabaseClient */ \"(rsc)/./lib/supabaseClient.ts\");\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/dist/esm/index.js\");\n// lib/trpc/server.ts\n// This file defines the tRPC server-side router and procedures.\n\n\n\n\n // Import z from zod\n// Initialize tRPC\nconst t = _trpc_server__WEBPACK_IMPORTED_MODULE_0__.initTRPC.context().create();\n// Middleware to check if the user is authenticated\nconst isAuthenticated = t.middleware(async ({ ctx, next })=>{\n    if (!ctx.userId) {\n        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n            code: \"UNAUTHORIZED\"\n        });\n    }\n    return next({\n        ctx: {\n            userId: ctx.userId\n        }\n    });\n});\n// Create base router and procedures\nconst appRouter = t.router({\n    // Public procedure for health check\n    health: t.procedure.query(()=>{\n        return {\n            status: \"ok\"\n        };\n    }),\n    // Protected procedures for chat functionality\n    chat: t.router({\n        // NEW: Get all chat sessions for the authenticated user\n        getChatSessions: t.procedure.use(isAuthenticated).query(async ({ ctx })=>{\n            const { userId, supabase } = ctx;\n            console.log(`[TRPC] Fetching chat sessions for user: ${userId}`);\n            const { data, error } = await supabase.from(\"chat_sessions\").select(\"*\").eq(\"user_id\", userId).order(\"created_at\", {\n                ascending: false\n            }); // Order by newest first\n            if (error) {\n                console.error(\"Error fetching chat sessions:\", error);\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"Failed to fetch chat sessions.\"\n                });\n            }\n            console.log(`[TRPC] Fetched ${data.length} chat sessions for user: ${userId}`);\n            return data;\n        }),\n        // NEW: Create a new chat session for the authenticated user\n        createChatSession: t.procedure.use(isAuthenticated).mutation(async ({ ctx })=>{\n            const { userId, supabase } = ctx;\n            console.log(`[TRPC] Creating new chat session for user: ${userId}`);\n            const { data, error } = await supabase.from(\"chat_sessions\").insert({\n                user_id: userId\n            }).select() // Select the inserted row to get its ID\n            .single(); // Expect a single row\n            if (error || !data) {\n                console.error(\"Error creating chat session:\", error);\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"Failed to create new chat session.\"\n                });\n            }\n            console.log(`[TRPC] Created new chat session with ID: ${data.id}`);\n            return data; // Return the new session object\n        }),\n        // NEW: Delete a specific chat session and all its messages (due to CASCADE DELETE)\n        deleteChatSession: t.procedure.use(isAuthenticated).input(zod__WEBPACK_IMPORTED_MODULE_4__.z.object({\n            sessionId: zod__WEBPACK_IMPORTED_MODULE_4__.z.string().uuid()\n        })) // Expect a UUID string for session ID\n        .mutation(async ({ input, ctx })=>{\n            const { userId, supabase } = ctx;\n            const { sessionId } = input;\n            console.log(`[TRPC] Deleting chat session ${sessionId} for user: ${userId}`);\n            // First, verify the user owns this session before deleting\n            const { data: sessionData, error: sessionError } = await supabase.from(\"chat_sessions\").select(\"user_id\").eq(\"id\", sessionId).single();\n            if (sessionError || !sessionData || sessionData.user_id !== userId) {\n                console.error(`Attempted to delete session ${sessionId} not owned by user ${userId}`);\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                    code: \"FORBIDDEN\",\n                    message: \"You are not authorized to delete this chat session.\"\n                });\n            }\n            const { error } = await supabase.from(\"chat_sessions\").delete().eq(\"id\", sessionId); // Delete by session ID\n            if (error) {\n                console.error(`Error deleting chat session ${sessionId} from Supabase:`, error);\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"Failed to delete chat session.\"\n                });\n            }\n            console.log(`[TRPC] Successfully deleted chat session: ${sessionId}`);\n            return {\n                success: true\n            };\n        }),\n        // NEW: Update the title of a specific chat session\n        updateChatSessionTitle: t.procedure.use(isAuthenticated).input(zod__WEBPACK_IMPORTED_MODULE_4__.z.object({\n            sessionId: zod__WEBPACK_IMPORTED_MODULE_4__.z.string().uuid(),\n            newTitle: zod__WEBPACK_IMPORTED_MODULE_4__.z.string().min(1, \"Chat title cannot be empty\").max(100, \"Chat title is too long\")\n        })).mutation(async ({ input, ctx })=>{\n            const { userId, supabase } = ctx;\n            const { sessionId, newTitle } = input;\n            console.log(`[TRPC] Renaming session ${sessionId} to \"${newTitle}\" for user: ${userId}`);\n            // Verify the user owns this session before updating\n            const { data: sessionData, error: sessionError } = await supabase.from(\"chat_sessions\").select(\"user_id\").eq(\"id\", sessionId).single();\n            if (sessionError || !sessionData || sessionData.user_id !== userId) {\n                console.error(`Attempted to rename session ${sessionId} not owned by user ${userId}`);\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                    code: \"FORBIDDEN\",\n                    message: \"You are not authorized to rename this chat session.\"\n                });\n            }\n            const { data, error } = await supabase.from(\"chat_sessions\").update({\n                title: newTitle\n            }).eq(\"id\", sessionId).select().single(); // Select the updated row\n            if (error || !data) {\n                console.error(`Error updating session title for ${sessionId}:`, error);\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"Failed to rename chat session.\"\n                });\n            }\n            console.log(`[TRPC] Session ${sessionId} renamed to \"${data.title}\".`);\n            return data; // Return the updated session object\n        }),\n        // MODIFIED: Fetch messages for a specific chat session\n        getMessages: t.procedure.use(isAuthenticated).input(zod__WEBPACK_IMPORTED_MODULE_4__.z.object({\n            sessionId: zod__WEBPACK_IMPORTED_MODULE_4__.z.string().uuid()\n        })) // Now requires a sessionId\n        .query(async ({ ctx, input })=>{\n            const { userId, supabase } = ctx;\n            const { sessionId } = input;\n            console.log(`[TRPC] Fetching messages for session: ${sessionId} for user: ${userId}`);\n            const { data, error } = await supabase.from(\"messages\").select(\"*\").eq(\"session_id\", sessionId) // Filter by session_id\n            .order(\"created_at\", {\n                ascending: true\n            });\n            if (error) {\n                console.error(\"Error fetching messages for session:\", sessionId, error);\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"Failed to fetch messages for session.\"\n                });\n            }\n            console.log(`[TRPC] Fetched ${data.length} messages for session: ${sessionId}`);\n            return data;\n        }),\n        // MODIFIED: Send a text message with a specific session ID\n        sendTextMessage: t.procedure.use(isAuthenticated).input(zod__WEBPACK_IMPORTED_MODULE_4__.z.object({\n            prompt: zod__WEBPACK_IMPORTED_MODULE_4__.z.string(),\n            isUser: zod__WEBPACK_IMPORTED_MODULE_4__.z.boolean(),\n            sessionId: zod__WEBPACK_IMPORTED_MODULE_4__.z.string().uuid() // Now requires a sessionId\n        })).mutation(async ({ input, ctx })=>{\n            const { userId, supabase } = ctx;\n            const { prompt, isUser, sessionId } = input;\n            console.log(`[TRPC] User ${userId} sending text message to session ${sessionId}: \"${prompt}\"`);\n            // Save user's message first\n            const { error: userMessageError } = await supabase.from(\"messages\").insert({\n                user_id: userId,\n                session_id: sessionId,\n                content: prompt,\n                role: \"user\",\n                type: \"text\"\n            });\n            if (userMessageError) {\n                console.error(\"Error saving user message:\", userMessageError);\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"Failed to save user message.\"\n                });\n            }\n            console.log(\"[TRPC] User message saved to Supabase.\");\n            // Robust API Key check and logging for text model\n            const apiKeyText = process.env.GOOGLE_API_KEY_TEXT;\n            console.log(`[TRPC] (sendTextMessage) GOOGLE_API_KEY_TEXT value: ${apiKeyText ? \"Key is present (truncated for security): \" + apiKeyText.substring(0, 5) + \"...\" : \"Key is undefined or empty\"}`);\n            if (!apiKeyText) {\n                console.error(\"GOOGLE_API_KEY_TEXT is not set for text generation.\");\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"Gemini API key for text is missing.\"\n                });\n            }\n            const genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_3__.GoogleGenerativeAI(apiKeyText);\n            const model = genAI.getGenerativeModel({\n                model: \"gemini-2.0-flash\"\n            });\n            try {\n                console.log(\"[TRPC] Calling Gemini text model...\");\n                const result = await model.generateContent(prompt);\n                const response = result.response;\n                const text = response.text();\n                console.log(`[TRPC] Gemini text response: \"${text}\"`);\n                // Save AI's response\n                const { error: aiMessageError } = await supabase.from(\"messages\").insert({\n                    user_id: userId,\n                    session_id: sessionId,\n                    content: text,\n                    role: \"model\",\n                    type: \"text\"\n                });\n                if (aiMessageError) {\n                    console.error(\"Error saving AI message:\", aiMessageError);\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                        code: \"INTERNAL_SERVER_ERROR\",\n                        message: \"Failed to save AI message.\"\n                    });\n                }\n                console.log(\"[TRPC] AI message saved to Supabase.\");\n                return {\n                    userMessage: prompt,\n                    aiMessage: text\n                };\n            } catch (error) {\n                console.error(\"Error generating text with Gemini:\", error);\n                if (error instanceof Error) {\n                    console.error(\"Gemini error message:\", error.message);\n                    console.error(\"Gemini error name:\", error.name);\n                }\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: `Failed to generate AI text response: ${error instanceof Error ? error.message : String(error)}`\n                });\n            }\n        }),\n        // MODIFIED: Generate an image with a specific session ID\n        generateImage: t.procedure.use(isAuthenticated).input(zod__WEBPACK_IMPORTED_MODULE_4__.z.object({\n            prompt: zod__WEBPACK_IMPORTED_MODULE_4__.z.string(),\n            sessionId: zod__WEBPACK_IMPORTED_MODULE_4__.z.string().uuid() // Now requires a sessionId\n        })).mutation(async ({ input, ctx })=>{\n            const { userId, supabase } = ctx;\n            const { prompt, sessionId } = input;\n            console.log(`[TRPC] User ${userId} requesting image generation for session ${sessionId}, prompt: \"${prompt}\"`);\n            // Save user's image prompt\n            const { error: userPromptError } = await supabase.from(\"messages\").insert({\n                user_id: userId,\n                session_id: sessionId,\n                content: prompt,\n                role: \"user\",\n                type: \"image_prompt\"\n            });\n            if (userPromptError) {\n                console.error(\"Error saving user image prompt:\", userPromptError);\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"Failed to save image prompt.\"\n                });\n            }\n            console.log(\"[TRPC] User image prompt saved to Supabase.\");\n            // --- TEMPORARY WORKAROUND FOR BILLING/IMAGEN API ISSUE ---\n            const apiKeyText = process.env.GOOGLE_API_KEY_TEXT;\n            console.log(`[TRPC] (generateImage workaround) GOOGLE_API_KEY_TEXT value: ${apiKeyText ? \"Key is present (truncated for security): \" + apiKeyText.substring(0, 5) + \"...\" : \"Key is undefined or empty\"}`);\n            if (!apiKeyText) {\n                console.error(\"GOOGLE_API_KEY_TEXT is not set for image workaround.\");\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"Gemini API key for text is missing (for image workaround).\"\n                });\n            }\n            const genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_3__.GoogleGenerativeAI(apiKeyText);\n            const textModel = genAI.getGenerativeModel({\n                model: \"gemini-2.0-flash\"\n            });\n            try {\n                console.log(\"[TRPC] (Workaround) Calling Gemini text model for image prompt...\");\n                const textResult = await textModel.generateContent(`Generate a descriptive caption for an image of: ${prompt}.`);\n                const textResponse = textResult.response.text();\n                console.log(`[TRPC] (Workaround) Generated text for image prompt: \"${textResponse}\"`);\n                const placeholderImageUrl = `https://placehold.co/400x200/cccccc/000000?text=Image+for:${encodeURIComponent(prompt.substring(0, 20))}...`;\n                const { error: imageSaveError } = await supabase.from(\"messages\").insert({\n                    user_id: userId,\n                    session_id: sessionId,\n                    content: placeholderImageUrl,\n                    role: \"model\",\n                    type: \"image\"\n                });\n                if (imageSaveError) {\n                    console.error(\"Error saving generated image (workaround) to Supabase:\", imageSaveError);\n                    throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                        code: \"INTERNAL_SERVER_ERROR\",\n                        message: \"Failed to save generated image (workaround).\"\n                    });\n                }\n                console.log(\"[TRPC] Generated image (workaround) saved to Supabase.\");\n                return {\n                    imageUrl: placeholderImageUrl\n                };\n            } catch (error) {\n                console.error(\"Error in generateImage (workaround) mutation:\", error);\n                if (error instanceof Error) {\n                    console.error(\"Workaround error message:\", error.message);\n                    console.error(\"Workaround error name:\", error.name);\n                }\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: `Failed to generate image (workaround): ${error instanceof Error ? error.message : String(error)}`\n                });\n            }\n        // --- END TEMPORARY WORKAROUND ---\n        })\n    })\n});\n// Create tRPC API handler context\nconst createContext = async ()=>{\n    // Get Auth0 session\n    const session = await (0,_auth0_nextjs_auth0__WEBPACK_IMPORTED_MODULE_1__.getSession)();\n    const userId = session?.user?.sub || null; // Auth0 user ID\n    // Create Supabase client for the current context\n    const supabase = (0,_supabaseClient__WEBPACK_IMPORTED_MODULE_2__.createSupabaseAdminClient)();\n    console.log(`[TRPC Context] User ID: ${userId ? userId : \"Not authenticated\"}`);\n    return {\n        session,\n        userId,\n        supabase\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUkwQixnQkFBZ0I7b0JBQ2xCcEUsUUFBUUcsS0FBSyxDQUFDLDBEQUEwRGlFO29CQUN4RSxNQUFNLElBQUk1RixtREFBU0EsQ0FBQzt3QkFDbEJhLE1BQU07d0JBQ05vQixTQUFTO29CQUNYO2dCQUNGO2dCQUNBVCxRQUFRQyxHQUFHLENBQUM7Z0JBQ1osT0FBTztvQkFBRW9FLFVBQVVIO2dCQUFvQjtZQUN6QyxFQUFFLE9BQU8vRCxPQUFPO2dCQUNkSCxRQUFRRyxLQUFLLENBQUMsaURBQWlEQTtnQkFDL0QsSUFBSUEsaUJBQWlCdUQsT0FBTztvQkFDMUIxRCxRQUFRRyxLQUFLLENBQUMsNkJBQTZCQSxNQUFNTSxPQUFPO29CQUN4RFQsUUFBUUcsS0FBSyxDQUFDLDBCQUEwQkEsTUFBTXdELElBQUk7Z0JBQ3BEO2dCQUNBLE1BQU0sSUFBSW5GLG1EQUFTQSxDQUFDO29CQUNsQmEsTUFBTTtvQkFDTm9CLFNBQVMsQ0FBQyx1Q0FBdUMsRUFBRU4saUJBQWlCdUQsUUFBUXZELE1BQU1NLE9BQU8sR0FBR21ELE9BQU96RCxPQUFPLENBQUM7Z0JBQzdHO1lBQ0Y7UUFDQSxtQ0FBbUM7UUFDckM7SUFDSjtBQUNGLEdBQUc7QUFLSCxrQ0FBa0M7QUFDM0IsTUFBTW1FLGdCQUFnQjtJQUMzQixvQkFBb0I7SUFDcEIsTUFBTUMsVUFBVSxNQUFNOUYsK0RBQVVBO0lBQ2hDLE1BQU1XLFNBQVNtRixTQUFTQyxNQUFNQyxPQUFPLE1BQU0sZ0JBQWdCO0lBRTNELGlEQUFpRDtJQUNqRCxNQUFNMUUsV0FBV3JCLDBFQUF5QkE7SUFDMUNzQixRQUFRQyxHQUFHLENBQUMsQ0FBQyx3QkFBd0IsRUFBRWIsU0FBU0EsU0FBUyxvQkFBb0IsQ0FBQztJQUM5RSxPQUFPO1FBQ0xtRjtRQUNBbkY7UUFDQVc7SUFDRjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGF0Z3B0LW1vYmlsZS1jbG9uZS8uL2xpYi90cnBjL3NlcnZlci50cz8yZTVmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGxpYi90cnBjL3NlcnZlci50c1xyXG4vLyBUaGlzIGZpbGUgZGVmaW5lcyB0aGUgdFJQQyBzZXJ2ZXItc2lkZSByb3V0ZXIgYW5kIHByb2NlZHVyZXMuXHJcblxyXG5pbXBvcnQgeyBpbml0VFJQQywgVFJQQ0Vycm9yIH0gZnJvbSAnQHRycGMvc2VydmVyJztcclxuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gJ0BhdXRoMC9uZXh0anMtYXV0aDAnO1xyXG5pbXBvcnQgeyBjcmVhdGVTdXBhYmFzZUFkbWluQ2xpZW50IH0gZnJvbSAnLi4vc3VwYWJhc2VDbGllbnQnO1xyXG5pbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tICdAZ29vZ2xlL2dlbmVyYXRpdmUtYWknO1xyXG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJzsgLy8gSW1wb3J0IHogZnJvbSB6b2RcclxuXHJcbi8vIERlZmluZSBjb250ZXh0IGZvciB0UlBDIHByb2NlZHVyZXMuIEl0IHdpbGwgY29udGFpbiB1c2VyIHNlc3Npb24gYW5kIFN1cGFiYXNlIGNsaWVudC5cclxuaW50ZXJmYWNlIENvbnRleHQge1xyXG4gIHVzZXJJZDogc3RyaW5nIHwgbnVsbDtcclxuICBzdXBhYmFzZTogUmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlU3VwYWJhc2VBZG1pbkNsaWVudD47XHJcbn1cclxuXHJcbi8vIEluaXRpYWxpemUgdFJQQ1xyXG5jb25zdCB0ID0gaW5pdFRSUEMuY29udGV4dDxDb250ZXh0PigpLmNyZWF0ZSgpO1xyXG5cclxuLy8gTWlkZGxld2FyZSB0byBjaGVjayBpZiB0aGUgdXNlciBpcyBhdXRoZW50aWNhdGVkXHJcbmNvbnN0IGlzQXV0aGVudGljYXRlZCA9IHQubWlkZGxld2FyZShhc3luYyAoeyBjdHgsIG5leHQgfSkgPT4ge1xyXG4gIGlmICghY3R4LnVzZXJJZCkge1xyXG4gICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IGNvZGU6ICdVTkFVVEhPUklaRUQnIH0pO1xyXG4gIH1cclxuICByZXR1cm4gbmV4dCh7XHJcbiAgICBjdHg6IHtcclxuICAgICAgdXNlcklkOiBjdHgudXNlcklkLCAvLyBFbnN1cmUgdXNlcklkIGlzIHBhc3NlZCB0byBzdWJzZXF1ZW50IHByb2NlZHVyZXNcclxuICAgIH0sXHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy8gQ3JlYXRlIGJhc2Ugcm91dGVyIGFuZCBwcm9jZWR1cmVzXHJcbmV4cG9ydCBjb25zdCBhcHBSb3V0ZXIgPSB0LnJvdXRlcih7XHJcbiAgLy8gUHVibGljIHByb2NlZHVyZSBmb3IgaGVhbHRoIGNoZWNrXHJcbiAgaGVhbHRoOiB0LnByb2NlZHVyZS5xdWVyeSgoKSA9PiB7XHJcbiAgICByZXR1cm4geyBzdGF0dXM6ICdvaycgfTtcclxuICB9KSxcclxuXHJcbiAgLy8gUHJvdGVjdGVkIHByb2NlZHVyZXMgZm9yIGNoYXQgZnVuY3Rpb25hbGl0eVxyXG4gIGNoYXQ6IHQucm91dGVyKHtcclxuICAgIC8vIE5FVzogR2V0IGFsbCBjaGF0IHNlc3Npb25zIGZvciB0aGUgYXV0aGVudGljYXRlZCB1c2VyXHJcbiAgICBnZXRDaGF0U2Vzc2lvbnM6IHQucHJvY2VkdXJlLnVzZShpc0F1dGhlbnRpY2F0ZWQpLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgdXNlcklkLCBzdXBhYmFzZSB9ID0gY3R4O1xyXG4gICAgICBjb25zb2xlLmxvZyhgW1RSUENdIEZldGNoaW5nIGNoYXQgc2Vzc2lvbnMgZm9yIHVzZXI6ICR7dXNlcklkfWApO1xyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdjaGF0X3Nlc3Npb25zJylcclxuICAgICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpXHJcbiAgICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pOyAvLyBPcmRlciBieSBuZXdlc3QgZmlyc3RcclxuXHJcbiAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNoYXQgc2Vzc2lvbnM6JywgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xyXG4gICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXHJcbiAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIGNoYXQgc2Vzc2lvbnMuJyxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBjb25zb2xlLmxvZyhgW1RSUENdIEZldGNoZWQgJHtkYXRhLmxlbmd0aH0gY2hhdCBzZXNzaW9ucyBmb3IgdXNlcjogJHt1c2VySWR9YCk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSksXHJcblxyXG4gICAgLy8gTkVXOiBDcmVhdGUgYSBuZXcgY2hhdCBzZXNzaW9uIGZvciB0aGUgYXV0aGVudGljYXRlZCB1c2VyXHJcbiAgICBjcmVhdGVDaGF0U2Vzc2lvbjogdC5wcm9jZWR1cmUudXNlKGlzQXV0aGVudGljYXRlZClcclxuICAgICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCB9KSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyB1c2VySWQsIHN1cGFiYXNlIH0gPSBjdHg7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFtUUlBDXSBDcmVhdGluZyBuZXcgY2hhdCBzZXNzaW9uIGZvciB1c2VyOiAke3VzZXJJZH1gKTtcclxuICAgICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgICAgLmZyb20oJ2NoYXRfc2Vzc2lvbnMnKVxyXG4gICAgICAgICAgLmluc2VydCh7IHVzZXJfaWQ6IHVzZXJJZCB9KVxyXG4gICAgICAgICAgLnNlbGVjdCgpIC8vIFNlbGVjdCB0aGUgaW5zZXJ0ZWQgcm93IHRvIGdldCBpdHMgSURcclxuICAgICAgICAgIC5zaW5nbGUoKTsgLy8gRXhwZWN0IGEgc2luZ2xlIHJvd1xyXG5cclxuICAgICAgICBpZiAoZXJyb3IgfHwgIWRhdGEpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGNoYXQgc2Vzc2lvbjonLCBlcnJvcik7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcclxuICAgICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gY3JlYXRlIG5ldyBjaGF0IHNlc3Npb24uJyxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyhgW1RSUENdIENyZWF0ZWQgbmV3IGNoYXQgc2Vzc2lvbiB3aXRoIElEOiAke2RhdGEuaWR9YCk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7IC8vIFJldHVybiB0aGUgbmV3IHNlc3Npb24gb2JqZWN0XHJcbiAgICAgIH0pLFxyXG5cclxuICAgIC8vIE5FVzogRGVsZXRlIGEgc3BlY2lmaWMgY2hhdCBzZXNzaW9uIGFuZCBhbGwgaXRzIG1lc3NhZ2VzIChkdWUgdG8gQ0FTQ0FERSBERUxFVEUpXHJcbiAgICBkZWxldGVDaGF0U2Vzc2lvbjogdC5wcm9jZWR1cmUudXNlKGlzQXV0aGVudGljYXRlZClcclxuICAgICAgLmlucHV0KHoub2JqZWN0KHsgc2Vzc2lvbklkOiB6LnN0cmluZygpLnV1aWQoKSB9KSkgLy8gRXhwZWN0IGEgVVVJRCBzdHJpbmcgZm9yIHNlc3Npb24gSURcclxuICAgICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgdXNlcklkLCBzdXBhYmFzZSB9ID0gY3R4O1xyXG4gICAgICAgIGNvbnN0IHsgc2Vzc2lvbklkIH0gPSBpbnB1dDtcclxuICAgICAgICBjb25zb2xlLmxvZyhgW1RSUENdIERlbGV0aW5nIGNoYXQgc2Vzc2lvbiAke3Nlc3Npb25JZH0gZm9yIHVzZXI6ICR7dXNlcklkfWApO1xyXG5cclxuICAgICAgICAvLyBGaXJzdCwgdmVyaWZ5IHRoZSB1c2VyIG93bnMgdGhpcyBzZXNzaW9uIGJlZm9yZSBkZWxldGluZ1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogc2Vzc2lvbkRhdGEsIGVycm9yOiBzZXNzaW9uRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAuZnJvbSgnY2hhdF9zZXNzaW9ucycpXHJcbiAgICAgICAgICAuc2VsZWN0KCd1c2VyX2lkJylcclxuICAgICAgICAgIC5lcSgnaWQnLCBzZXNzaW9uSWQpXHJcbiAgICAgICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgICAgIGlmIChzZXNzaW9uRXJyb3IgfHwgIXNlc3Npb25EYXRhIHx8IHNlc3Npb25EYXRhLnVzZXJfaWQgIT09IHVzZXJJZCkge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihgQXR0ZW1wdGVkIHRvIGRlbGV0ZSBzZXNzaW9uICR7c2Vzc2lvbklkfSBub3Qgb3duZWQgYnkgdXNlciAke3VzZXJJZH1gKTtcclxuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xyXG4gICAgICAgICAgICBjb2RlOiAnRk9SQklEREVOJyxcclxuICAgICAgICAgICAgbWVzc2FnZTogJ1lvdSBhcmUgbm90IGF1dGhvcml6ZWQgdG8gZGVsZXRlIHRoaXMgY2hhdCBzZXNzaW9uLicsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAuZnJvbSgnY2hhdF9zZXNzaW9ucycpXHJcbiAgICAgICAgICAuZGVsZXRlKClcclxuICAgICAgICAgIC5lcSgnaWQnLCBzZXNzaW9uSWQpOyAvLyBEZWxldGUgYnkgc2Vzc2lvbiBJRFxyXG5cclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGRlbGV0aW5nIGNoYXQgc2Vzc2lvbiAke3Nlc3Npb25JZH0gZnJvbSBTdXBhYmFzZTpgLCBlcnJvcik7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcclxuICAgICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZGVsZXRlIGNoYXQgc2Vzc2lvbi4nLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGBbVFJQQ10gU3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgY2hhdCBzZXNzaW9uOiAke3Nlc3Npb25JZH1gKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgICAgIH0pLFxyXG5cclxuICAgIC8vIE5FVzogVXBkYXRlIHRoZSB0aXRsZSBvZiBhIHNwZWNpZmljIGNoYXQgc2Vzc2lvblxyXG4gICAgdXBkYXRlQ2hhdFNlc3Npb25UaXRsZTogdC5wcm9jZWR1cmUudXNlKGlzQXV0aGVudGljYXRlZClcclxuICAgICAgLmlucHV0KHoub2JqZWN0KHtcclxuICAgICAgICBzZXNzaW9uSWQ6IHouc3RyaW5nKCkudXVpZCgpLFxyXG4gICAgICAgIG5ld1RpdGxlOiB6LnN0cmluZygpLm1pbigxLCBcIkNoYXQgdGl0bGUgY2Fubm90IGJlIGVtcHR5XCIpLm1heCgxMDAsIFwiQ2hhdCB0aXRsZSBpcyB0b28gbG9uZ1wiKVxyXG4gICAgICB9KSlcclxuICAgICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgdXNlcklkLCBzdXBhYmFzZSB9ID0gY3R4O1xyXG4gICAgICAgIGNvbnN0IHsgc2Vzc2lvbklkLCBuZXdUaXRsZSB9ID0gaW5wdXQ7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFtUUlBDXSBSZW5hbWluZyBzZXNzaW9uICR7c2Vzc2lvbklkfSB0byBcIiR7bmV3VGl0bGV9XCIgZm9yIHVzZXI6ICR7dXNlcklkfWApO1xyXG5cclxuICAgICAgICAvLyBWZXJpZnkgdGhlIHVzZXIgb3ducyB0aGlzIHNlc3Npb24gYmVmb3JlIHVwZGF0aW5nXHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBzZXNzaW9uRGF0YSwgZXJyb3I6IHNlc3Npb25FcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgIC5mcm9tKCdjaGF0X3Nlc3Npb25zJylcclxuICAgICAgICAgIC5zZWxlY3QoJ3VzZXJfaWQnKVxyXG4gICAgICAgICAgLmVxKCdpZCcsIHNlc3Npb25JZClcclxuICAgICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgICAgaWYgKHNlc3Npb25FcnJvciB8fCAhc2Vzc2lvbkRhdGEgfHwgc2Vzc2lvbkRhdGEudXNlcl9pZCAhPT0gdXNlcklkKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBBdHRlbXB0ZWQgdG8gcmVuYW1lIHNlc3Npb24gJHtzZXNzaW9uSWR9IG5vdCBvd25lZCBieSB1c2VyICR7dXNlcklkfWApO1xyXG4gICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XHJcbiAgICAgICAgICAgIGNvZGU6ICdGT1JCSURERU4nLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiAnWW91IGFyZSBub3QgYXV0aG9yaXplZCB0byByZW5hbWUgdGhpcyBjaGF0IHNlc3Npb24uJyxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgIC5mcm9tKCdjaGF0X3Nlc3Npb25zJylcclxuICAgICAgICAgIC51cGRhdGUoeyB0aXRsZTogbmV3VGl0bGUgfSlcclxuICAgICAgICAgIC5lcSgnaWQnLCBzZXNzaW9uSWQpXHJcbiAgICAgICAgICAuc2VsZWN0KClcclxuICAgICAgICAgIC5zaW5nbGUoKTsgLy8gU2VsZWN0IHRoZSB1cGRhdGVkIHJvd1xyXG5cclxuICAgICAgICBpZiAoZXJyb3IgfHwgIWRhdGEpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHVwZGF0aW5nIHNlc3Npb24gdGl0bGUgZm9yICR7c2Vzc2lvbklkfTpgLCBlcnJvcik7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcclxuICAgICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gcmVuYW1lIGNoYXQgc2Vzc2lvbi4nLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGBbVFJQQ10gU2Vzc2lvbiAke3Nlc3Npb25JZH0gcmVuYW1lZCB0byBcIiR7ZGF0YS50aXRsZX1cIi5gKTtcclxuICAgICAgICByZXR1cm4gZGF0YTsgLy8gUmV0dXJuIHRoZSB1cGRhdGVkIHNlc3Npb24gb2JqZWN0XHJcbiAgICAgIH0pLFxyXG5cclxuICAgIC8vIE1PRElGSUVEOiBGZXRjaCBtZXNzYWdlcyBmb3IgYSBzcGVjaWZpYyBjaGF0IHNlc3Npb25cclxuICAgIGdldE1lc3NhZ2VzOiB0LnByb2NlZHVyZS51c2UoaXNBdXRoZW50aWNhdGVkKVxyXG4gICAgICAuaW5wdXQoei5vYmplY3QoeyBzZXNzaW9uSWQ6IHouc3RyaW5nKCkudXVpZCgpIH0pKSAvLyBOb3cgcmVxdWlyZXMgYSBzZXNzaW9uSWRcclxuICAgICAgLnF1ZXJ5KGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgdXNlcklkLCBzdXBhYmFzZSB9ID0gY3R4O1xyXG4gICAgICAgIGNvbnN0IHsgc2Vzc2lvbklkIH0gPSBpbnB1dDtcclxuICAgICAgICBjb25zb2xlLmxvZyhgW1RSUENdIEZldGNoaW5nIG1lc3NhZ2VzIGZvciBzZXNzaW9uOiAke3Nlc3Npb25JZH0gZm9yIHVzZXI6ICR7dXNlcklkfWApO1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAuZnJvbSgnbWVzc2FnZXMnKVxyXG4gICAgICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgICAgICAuZXEoJ3Nlc3Npb25faWQnLCBzZXNzaW9uSWQpIC8vIEZpbHRlciBieSBzZXNzaW9uX2lkXHJcbiAgICAgICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KTtcclxuXHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBtZXNzYWdlcyBmb3Igc2Vzc2lvbjonLCBzZXNzaW9uSWQsIGVycm9yKTtcclxuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xyXG4gICAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcclxuICAgICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBmZXRjaCBtZXNzYWdlcyBmb3Igc2Vzc2lvbi4nLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGBbVFJQQ10gRmV0Y2hlZCAke2RhdGEubGVuZ3RofSBtZXNzYWdlcyBmb3Igc2Vzc2lvbjogJHtzZXNzaW9uSWR9YCk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgIH0pLFxyXG5cclxuICAgIC8vIE1PRElGSUVEOiBTZW5kIGEgdGV4dCBtZXNzYWdlIHdpdGggYSBzcGVjaWZpYyBzZXNzaW9uIElEXHJcbiAgICBzZW5kVGV4dE1lc3NhZ2U6IHQucHJvY2VkdXJlLnVzZShpc0F1dGhlbnRpY2F0ZWQpXHJcbiAgICAgIC5pbnB1dCh6Lm9iamVjdCh7XHJcbiAgICAgICAgcHJvbXB0OiB6LnN0cmluZygpLFxyXG4gICAgICAgIGlzVXNlcjogei5ib29sZWFuKCksXHJcbiAgICAgICAgc2Vzc2lvbklkOiB6LnN0cmluZygpLnV1aWQoKSAvLyBOb3cgcmVxdWlyZXMgYSBzZXNzaW9uSWRcclxuICAgICAgfSkpXHJcbiAgICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcclxuICAgICAgICBjb25zdCB7IHVzZXJJZCwgc3VwYWJhc2UgfSA9IGN0eDtcclxuICAgICAgICBjb25zdCB7IHByb21wdCwgaXNVc2VyLCBzZXNzaW9uSWQgfSA9IGlucHV0O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBbVFJQQ10gVXNlciAke3VzZXJJZH0gc2VuZGluZyB0ZXh0IG1lc3NhZ2UgdG8gc2Vzc2lvbiAke3Nlc3Npb25JZH06IFwiJHtwcm9tcHR9XCJgKTtcclxuXHJcbiAgICAgICAgLy8gU2F2ZSB1c2VyJ3MgbWVzc2FnZSBmaXJzdFxyXG4gICAgICAgIGNvbnN0IHsgZXJyb3I6IHVzZXJNZXNzYWdlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ21lc3NhZ2VzJykuaW5zZXJ0KHtcclxuICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcclxuICAgICAgICAgIHNlc3Npb25faWQ6IHNlc3Npb25JZCwgLy8gSW5jbHVkZSBzZXNzaW9uX2lkXHJcbiAgICAgICAgICBjb250ZW50OiBwcm9tcHQsXHJcbiAgICAgICAgICByb2xlOiAndXNlcicsXHJcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHVzZXJNZXNzYWdlRXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyB1c2VyIG1lc3NhZ2U6JywgdXNlck1lc3NhZ2VFcnJvcik7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcclxuICAgICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gc2F2ZSB1c2VyIG1lc3NhZ2UuJyxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZygnW1RSUENdIFVzZXIgbWVzc2FnZSBzYXZlZCB0byBTdXBhYmFzZS4nKTtcclxuXHJcbiAgICAgICAgLy8gUm9idXN0IEFQSSBLZXkgY2hlY2sgYW5kIGxvZ2dpbmcgZm9yIHRleHQgbW9kZWxcclxuICAgICAgICBjb25zdCBhcGlLZXlUZXh0ID0gcHJvY2Vzcy5lbnYuR09PR0xFX0FQSV9LRVlfVEVYVDtcclxuICAgICAgICBjb25zb2xlLmxvZyhgW1RSUENdIChzZW5kVGV4dE1lc3NhZ2UpIEdPT0dMRV9BUElfS0VZX1RFWFQgdmFsdWU6ICR7YXBpS2V5VGV4dCA/ICdLZXkgaXMgcHJlc2VudCAodHJ1bmNhdGVkIGZvciBzZWN1cml0eSk6ICcgKyBhcGlLZXlUZXh0LnN1YnN0cmluZygwLCA1KSArICcuLi4nIDogJ0tleSBpcyB1bmRlZmluZWQgb3IgZW1wdHknfWApO1xyXG4gICAgICAgIGlmICghYXBpS2V5VGV4dCkge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignR09PR0xFX0FQSV9LRVlfVEVYVCBpcyBub3Qgc2V0IGZvciB0ZXh0IGdlbmVyYXRpb24uJyk7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcclxuICAgICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdHZW1pbmkgQVBJIGtleSBmb3IgdGV4dCBpcyBtaXNzaW5nLicsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGdlbkFJID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSShhcGlLZXlUZXh0KTtcclxuICAgICAgICBjb25zdCBtb2RlbCA9IGdlbkFJLmdldEdlbmVyYXRpdmVNb2RlbCh7IG1vZGVsOiBcImdlbWluaS0yLjAtZmxhc2hcIiB9KTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdbVFJQQ10gQ2FsbGluZyBHZW1pbmkgdGV4dCBtb2RlbC4uLicpO1xyXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbW9kZWwuZ2VuZXJhdGVDb250ZW50KHByb21wdCk7XHJcbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHJlc3VsdC5yZXNwb25zZTtcclxuICAgICAgICAgIGNvbnN0IHRleHQgPSByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW1RSUENdIEdlbWluaSB0ZXh0IHJlc3BvbnNlOiBcIiR7dGV4dH1cImApO1xyXG5cclxuICAgICAgICAgIC8vIFNhdmUgQUkncyByZXNwb25zZVxyXG4gICAgICAgICAgY29uc3QgeyBlcnJvcjogYWlNZXNzYWdlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ21lc3NhZ2VzJykuaW5zZXJ0KHtcclxuICAgICAgICAgICAgdXNlcl9pZDogdXNlcklkLFxyXG4gICAgICAgICAgICBzZXNzaW9uX2lkOiBzZXNzaW9uSWQsIC8vIEluY2x1ZGUgc2Vzc2lvbl9pZFxyXG4gICAgICAgICAgICBjb250ZW50OiB0ZXh0LFxyXG4gICAgICAgICAgICByb2xlOiAnbW9kZWwnLFxyXG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGlmIChhaU1lc3NhZ2VFcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgQUkgbWVzc2FnZTonLCBhaU1lc3NhZ2VFcnJvcik7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xyXG4gICAgICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxyXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gc2F2ZSBBSSBtZXNzYWdlLicsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1tUUlBDXSBBSSBtZXNzYWdlIHNhdmVkIHRvIFN1cGFiYXNlLicpO1xyXG4gICAgICAgICAgcmV0dXJuIHsgdXNlck1lc3NhZ2U6IHByb21wdCwgYWlNZXNzYWdlOiB0ZXh0IH07XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgdGV4dCB3aXRoIEdlbWluaTonLCBlcnJvcik7XHJcbiAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdHZW1pbmkgZXJyb3IgbWVzc2FnZTonLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR2VtaW5pIGVycm9yIG5hbWU6JywgZXJyb3IubmFtZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcclxuICAgICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBGYWlsZWQgdG8gZ2VuZXJhdGUgQUkgdGV4dCByZXNwb25zZTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSksXHJcblxyXG4gICAgLy8gTU9ESUZJRUQ6IEdlbmVyYXRlIGFuIGltYWdlIHdpdGggYSBzcGVjaWZpYyBzZXNzaW9uIElEXHJcbiAgICBnZW5lcmF0ZUltYWdlOiB0LnByb2NlZHVyZS51c2UoaXNBdXRoZW50aWNhdGVkKVxyXG4gICAgICAuaW5wdXQoei5vYmplY3Qoe1xyXG4gICAgICAgIHByb21wdDogei5zdHJpbmcoKSxcclxuICAgICAgICBzZXNzaW9uSWQ6IHouc3RyaW5nKCkudXVpZCgpIC8vIE5vdyByZXF1aXJlcyBhIHNlc3Npb25JZFxyXG4gICAgICB9KSlcclxuICAgICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgdXNlcklkLCBzdXBhYmFzZSB9ID0gY3R4O1xyXG4gICAgICAgIGNvbnN0IHsgcHJvbXB0LCBzZXNzaW9uSWQgfSA9IGlucHV0O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBbVFJQQ10gVXNlciAke3VzZXJJZH0gcmVxdWVzdGluZyBpbWFnZSBnZW5lcmF0aW9uIGZvciBzZXNzaW9uICR7c2Vzc2lvbklkfSwgcHJvbXB0OiBcIiR7cHJvbXB0fVwiYCk7XHJcblxyXG4gICAgICAgIC8vIFNhdmUgdXNlcidzIGltYWdlIHByb21wdFxyXG4gICAgICAgIGNvbnN0IHsgZXJyb3I6IHVzZXJQcm9tcHRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnbWVzc2FnZXMnKS5pbnNlcnQoe1xyXG4gICAgICAgICAgdXNlcl9pZDogdXNlcklkLFxyXG4gICAgICAgICAgc2Vzc2lvbl9pZDogc2Vzc2lvbklkLCAvLyBJbmNsdWRlIHNlc3Npb25faWRcclxuICAgICAgICAgIGNvbnRlbnQ6IHByb21wdCxcclxuICAgICAgICAgIHJvbGU6ICd1c2VyJyxcclxuICAgICAgICAgIHR5cGU6ICdpbWFnZV9wcm9tcHQnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh1c2VyUHJvbXB0RXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyB1c2VyIGltYWdlIHByb21wdDonLCB1c2VyUHJvbXB0RXJyb3IpO1xyXG4gICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XHJcbiAgICAgICAgICAgIGNvZGU6ICdJTlRFUk5BTF9TRVJWRVJfRVJST1InLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHNhdmUgaW1hZ2UgcHJvbXB0LicsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tUUlBDXSBVc2VyIGltYWdlIHByb21wdCBzYXZlZCB0byBTdXBhYmFzZS4nKTtcclxuXHJcbiAgICAgICAgLy8gLS0tIFRFTVBPUkFSWSBXT1JLQVJPVU5EIEZPUiBCSUxMSU5HL0lNQUdFTiBBUEkgSVNTVUUgLS0tXHJcbiAgICAgICAgY29uc3QgYXBpS2V5VGV4dCA9IHByb2Nlc3MuZW52LkdPT0dMRV9BUElfS0VZX1RFWFQ7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFtUUlBDXSAoZ2VuZXJhdGVJbWFnZSB3b3JrYXJvdW5kKSBHT09HTEVfQVBJX0tFWV9URVhUIHZhbHVlOiAke2FwaUtleVRleHQgPyAnS2V5IGlzIHByZXNlbnQgKHRydW5jYXRlZCBmb3Igc2VjdXJpdHkpOiAnICsgYXBpS2V5VGV4dC5zdWJzdHJpbmcoMCwgNSkgKyAnLi4uJyA6ICdLZXkgaXMgdW5kZWZpbmVkIG9yIGVtcHR5J31gKTtcclxuICAgICAgICBpZiAoIWFwaUtleVRleHQpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dPT0dMRV9BUElfS0VZX1RFWFQgaXMgbm90IHNldCBmb3IgaW1hZ2Ugd29ya2Fyb3VuZC4nKTtcclxuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xyXG4gICAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcclxuICAgICAgICAgICAgbWVzc2FnZTogJ0dlbWluaSBBUEkga2V5IGZvciB0ZXh0IGlzIG1pc3NpbmcgKGZvciBpbWFnZSB3b3JrYXJvdW5kKS4nLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGdlbkFJID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSShhcGlLZXlUZXh0KTtcclxuICAgICAgICBjb25zdCB0ZXh0TW9kZWwgPSBnZW5BSS5nZXRHZW5lcmF0aXZlTW9kZWwoeyBtb2RlbDogXCJnZW1pbmktMi4wLWZsYXNoXCIgfSk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnW1RSUENdIChXb3JrYXJvdW5kKSBDYWxsaW5nIEdlbWluaSB0ZXh0IG1vZGVsIGZvciBpbWFnZSBwcm9tcHQuLi4nKTtcclxuICAgICAgICAgIGNvbnN0IHRleHRSZXN1bHQgPSBhd2FpdCB0ZXh0TW9kZWwuZ2VuZXJhdGVDb250ZW50KGBHZW5lcmF0ZSBhIGRlc2NyaXB0aXZlIGNhcHRpb24gZm9yIGFuIGltYWdlIG9mOiAke3Byb21wdH0uYCk7XHJcbiAgICAgICAgICBjb25zdCB0ZXh0UmVzcG9uc2UgPSB0ZXh0UmVzdWx0LnJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBbVFJQQ10gKFdvcmthcm91bmQpIEdlbmVyYXRlZCB0ZXh0IGZvciBpbWFnZSBwcm9tcHQ6IFwiJHt0ZXh0UmVzcG9uc2V9XCJgKTtcclxuXHJcbiAgICAgICAgICBjb25zdCBwbGFjZWhvbGRlckltYWdlVXJsID0gYGh0dHBzOi8vcGxhY2Vob2xkLmNvLzQwMHgyMDAvY2NjY2NjLzAwMDAwMD90ZXh0PUltYWdlK2Zvcjoke2VuY29kZVVSSUNvbXBvbmVudChwcm9tcHQuc3Vic3RyaW5nKDAsMjApKX0uLi5gO1xyXG5cclxuICAgICAgICAgIGNvbnN0IHsgZXJyb3I6IGltYWdlU2F2ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCdtZXNzYWdlcycpLmluc2VydCh7XHJcbiAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgc2Vzc2lvbl9pZDogc2Vzc2lvbklkLCAvLyBJbmNsdWRlIHNlc3Npb25faWRcclxuICAgICAgICAgICAgY29udGVudDogcGxhY2Vob2xkZXJJbWFnZVVybCxcclxuICAgICAgICAgICAgcm9sZTogJ21vZGVsJyxcclxuICAgICAgICAgICAgdHlwZTogJ2ltYWdlJyxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgaWYgKGltYWdlU2F2ZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBnZW5lcmF0ZWQgaW1hZ2UgKHdvcmthcm91bmQpIHRvIFN1cGFiYXNlOicsIGltYWdlU2F2ZUVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XHJcbiAgICAgICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXHJcbiAgICAgICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBzYXZlIGdlbmVyYXRlZCBpbWFnZSAod29ya2Fyb3VuZCkuJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnW1RSUENdIEdlbmVyYXRlZCBpbWFnZSAod29ya2Fyb3VuZCkgc2F2ZWQgdG8gU3VwYWJhc2UuJyk7XHJcbiAgICAgICAgICByZXR1cm4geyBpbWFnZVVybDogcGxhY2Vob2xkZXJJbWFnZVVybCB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZW5lcmF0ZUltYWdlICh3b3JrYXJvdW5kKSBtdXRhdGlvbjonLCBlcnJvcik7XHJcbiAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdXb3JrYXJvdW5kIGVycm9yIG1lc3NhZ2U6JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dvcmthcm91bmQgZXJyb3IgbmFtZTonLCBlcnJvci5uYW1lKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xyXG4gICAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcclxuICAgICAgICAgICAgbWVzc2FnZTogYEZhaWxlZCB0byBnZW5lcmF0ZSBpbWFnZSAod29ya2Fyb3VuZCk6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWAsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gLS0tIEVORCBURU1QT1JBUlkgV09SS0FST1VORCAtLS1cclxuICAgICAgfSksXHJcbiAgfSksXHJcbn0pO1xyXG5cclxuLy8gRXhwb3J0IHR5cGUgcm91dGVyIHR5cGUgc2lnbmF0dXJlLCB3aGljaCBjYW4gYmUgdXNlZCBieSB0aGUgY2xpZW50XHJcbmV4cG9ydCB0eXBlIEFwcFJvdXRlciA9IHR5cGVvZiBhcHBSb3V0ZXI7XHJcblxyXG4vLyBDcmVhdGUgdFJQQyBBUEkgaGFuZGxlciBjb250ZXh0XHJcbmV4cG9ydCBjb25zdCBjcmVhdGVDb250ZXh0ID0gYXN5bmMgKCkgPT4ge1xyXG4gIC8vIEdldCBBdXRoMCBzZXNzaW9uXHJcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb24oKTtcclxuICBjb25zdCB1c2VySWQgPSBzZXNzaW9uPy51c2VyPy5zdWIgfHwgbnVsbDsgLy8gQXV0aDAgdXNlciBJRFxyXG5cclxuICAvLyBDcmVhdGUgU3VwYWJhc2UgY2xpZW50IGZvciB0aGUgY3VycmVudCBjb250ZXh0XHJcbiAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVTdXBhYmFzZUFkbWluQ2xpZW50KCk7XHJcbiAgY29uc29sZS5sb2coYFtUUlBDIENvbnRleHRdIFVzZXIgSUQ6ICR7dXNlcklkID8gdXNlcklkIDogJ05vdCBhdXRoZW50aWNhdGVkJ31gKTtcclxuICByZXR1cm4ge1xyXG4gICAgc2Vzc2lvbixcclxuICAgIHVzZXJJZCxcclxuICAgIHN1cGFiYXNlLFxyXG4gIH07XHJcbn07XHJcbiJdLCJuYW1lcyI6WyJpbml0VFJQQyIsIlRSUENFcnJvciIsImdldFNlc3Npb24iLCJjcmVhdGVTdXBhYmFzZUFkbWluQ2xpZW50IiwiR29vZ2xlR2VuZXJhdGl2ZUFJIiwieiIsInQiLCJjb250ZXh0IiwiY3JlYXRlIiwiaXNBdXRoZW50aWNhdGVkIiwibWlkZGxld2FyZSIsImN0eCIsIm5leHQiLCJ1c2VySWQiLCJjb2RlIiwiYXBwUm91dGVyIiwicm91dGVyIiwiaGVhbHRoIiwicHJvY2VkdXJlIiwicXVlcnkiLCJzdGF0dXMiLCJjaGF0IiwiZ2V0Q2hhdFNlc3Npb25zIiwidXNlIiwic3VwYWJhc2UiLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwib3JkZXIiLCJhc2NlbmRpbmciLCJtZXNzYWdlIiwibGVuZ3RoIiwiY3JlYXRlQ2hhdFNlc3Npb24iLCJtdXRhdGlvbiIsImluc2VydCIsInVzZXJfaWQiLCJzaW5nbGUiLCJpZCIsImRlbGV0ZUNoYXRTZXNzaW9uIiwiaW5wdXQiLCJvYmplY3QiLCJzZXNzaW9uSWQiLCJzdHJpbmciLCJ1dWlkIiwic2Vzc2lvbkRhdGEiLCJzZXNzaW9uRXJyb3IiLCJkZWxldGUiLCJzdWNjZXNzIiwidXBkYXRlQ2hhdFNlc3Npb25UaXRsZSIsIm5ld1RpdGxlIiwibWluIiwibWF4IiwidXBkYXRlIiwidGl0bGUiLCJnZXRNZXNzYWdlcyIsInNlbmRUZXh0TWVzc2FnZSIsInByb21wdCIsImlzVXNlciIsImJvb2xlYW4iLCJ1c2VyTWVzc2FnZUVycm9yIiwic2Vzc2lvbl9pZCIsImNvbnRlbnQiLCJyb2xlIiwidHlwZSIsImFwaUtleVRleHQiLCJwcm9jZXNzIiwiZW52IiwiR09PR0xFX0FQSV9LRVlfVEVYVCIsInN1YnN0cmluZyIsImdlbkFJIiwibW9kZWwiLCJnZXRHZW5lcmF0aXZlTW9kZWwiLCJyZXN1bHQiLCJnZW5lcmF0ZUNvbnRlbnQiLCJyZXNwb25zZSIsInRleHQiLCJhaU1lc3NhZ2VFcnJvciIsInVzZXJNZXNzYWdlIiwiYWlNZXNzYWdlIiwiRXJyb3IiLCJuYW1lIiwiU3RyaW5nIiwiZ2VuZXJhdGVJbWFnZSIsInVzZXJQcm9tcHRFcnJvciIsInRleHRNb2RlbCIsInRleHRSZXN1bHQiLCJ0ZXh0UmVzcG9uc2UiLCJwbGFjZWhvbGRlckltYWdlVXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiaW1hZ2VTYXZlRXJyb3IiLCJpbWFnZVVybCIsImNyZWF0ZUNvbnRleHQiLCJzZXNzaW9uIiwidXNlciIsInN1YiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/trpc/server.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@auth0","vendor-chunks/tslib","vendor-chunks/@trpc","vendor-chunks/joi","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/@sideway","vendor-chunks/@hapi","vendor-chunks/debug","vendor-chunks/object-hash","vendor-chunks/cookie","vendor-chunks/oidc-token-hash","vendor-chunks/@panva","vendor-chunks/ms","vendor-chunks/supports-color","vendor-chunks/url-join","vendor-chunks/has-flag","vendor-chunks/@supabase","vendor-chunks/ws","vendor-chunks/zod","vendor-chunks/whatwg-url","vendor-chunks/tr46","vendor-chunks/@google"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftrpc%2F%5Btrpc%5D%2Froute.ts&appDir=C%3A%5CUsers%5CSHISHUPAL%5CDocuments%5COneDrive%20-%20iitkgp.ac.in%5CDesktop%5CSample%5Cchatgpt-mobile-clone%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CSHISHUPAL%5CDocuments%5COneDrive%20-%20iitkgp.ac.in%5CDesktop%5CSample%5Cchatgpt-mobile-clone&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();